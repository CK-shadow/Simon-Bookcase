{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{504:function(e,r,t){e.exports=t.p+\"assets/img/201911111058.98a532b0.png\"},505:function(e,r,t){e.exports=t.p+\"assets/img/201911111602.a0b3e745.png\"},506:function(e,r,t){e.exports=t.p+\"assets/img/201911111603.1c177733.png\"},507:function(e,r,t){e.exports=t.p+\"assets/img/201911111604.2b12ef14.png\"},508:function(e,r,t){e.exports=t.p+\"assets/img/201911111630.22fab5be.png\"},509:function(e,r,t){e.exports=t.p+\"assets/img/201911111631.9ea4a653.png\"},631:function(e,r,t){\"use strict\";t.r(r);var a=t(0),i=Object(a.a)({},(function(){var e=this,r=e.$createElement,a=e._self._c||r;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h3\",{attrs:{id:\"eureka简介\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#eureka简介\"}},[e._v(\"#\")]),e._v(\" Eureka简介\")]),e._v(\" \"),a(\"p\",[e._v(\"Eureka是一个服务注册与发现的组件，分为Eureka Server和Eureka Client，Eureka Server为Eureka服务注册中心，Eureka Client为Eureka客户端\")]),e._v(\" \"),a(\"p\",[e._v(\"Eureka基本架构，主要分为以下3个角色：\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[e._v(\"Register Service：服务注册中心，提供服务注册与发现功能\")]),e._v(\" \"),a(\"li\",[e._v(\"Provider Service：服务提供者，提供服务\")]),e._v(\" \"),a(\"li\",[e._v(\"Consumer Service：服务消费者，消费服务\")])]),e._v(\" \"),a(\"h3\",{attrs:{id:\"源码解析\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#源码解析\"}},[e._v(\"#\")]),e._v(\" 源码解析\")]),e._v(\" \"),a(\"p\",[e._v(\"Eureka的一些概念\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[e._v(\"Register--服务注册\\n\"),a(\"ul\",[a(\"li\",[e._v(\"当Eureka Client向Eureka Server注册时 ，Eureka Client提供自身的元数据，比如IP地址、端口、运行状况指标的URL，主页地址等信息\")])])]),e._v(\" \"),a(\"li\",[e._v(\"Renew--服务续约\\n\"),a(\"ul\",[a(\"li\",[e._v(\"Eureka Client在默认情况下会每隔30S发送一次心跳来进行服务续约，通过服务续约来告知Eureka Server该Eureka Client仍然可用，正常情况下，如果Eureka Server在90S内仍未收到Eureka Client的心跳，Eureka Server会将该Eureka Client实例从服务注册表中删除，官网建议不要修改服务续约的间隔时间\")])])]),e._v(\" \"),a(\"li\",[e._v(\"Fetch Registries--获取服务注册列表信息\\n\"),a(\"ul\",[a(\"li\",[e._v(\"Eureka Client从Eureka Server获取服务注册表信息，并将其缓存在本地。Eureka Client会使用服务注册列表信息查找其它服务的信息，从而进行远程调用。该注册列表信息每30S更新一次，每次返回注册列表信息可能与Eureka Client缓存的信息不同，Eureka Client会自己处理这些信息。如果某种原因导致注册信息表未能即时匹配，并将整个注册表以及每个应用程序的信息进行了压缩，压缩内容与未压缩的内容完全相同。Eureka Server和Eureka Client可以使用JSON和XML数据格式进行通信。在默认情况下，Eureka Client使用JSON格式的方式来获取服务注册列表的信息\")])])]),e._v(\" \"),a(\"li\",[e._v(\"Cancel--服务下线\\n\"),a(\"ul\",[a(\"li\",[e._v(\"Eureka Client在程序关闭时可以向Eureka Server发送下线请求，发送请求后，该客户端的实例信息会从EurekaServer的服务注册列表中删除，该下线请求不会自动完成，需要在程序关闭时调用以下代码：DiscoverManager.getInstance().shutdownComponent();\")])])]),e._v(\" \"),a(\"li\",[e._v(\"Eviction--服务剔除\\n\"),a(\"ul\",[a(\"li\",[e._v(\"在默认情况下，当Eureka Client连续90秒没有向Eureka Server发送服务续约（即心跳）时，Eureka Server会将该服务实例从服务注册列表删除，即服务剔除\")])])])]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Eureka的高可用架构\")]),a(\"br\"),e._v(\"\\n服务注册列表信息和服务续约信息会被复制到集群中的每个Eureka Server节点，来自任何区域的Eureka Client都可以获取整个系统的服务注册列表信息。根据这些注册列表信息，Application Client可以远程调用Application Serveice来消费服务\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:t(504),alt:\"\"}})]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"为什么Eureka Client获取服务实例这么慢\")])]),e._v(\" \"),a(\"ol\",[a(\"li\",[e._v(\"Eureka Client的延迟注册\\n\"),a(\"ul\",[a(\"li\",[e._v(\"Eureka Client启动之后，不是立即向Eureka Server注册的，而是有一个延迟向服务端注册的时间，默认的延迟时间为40S\")])])]),e._v(\" \"),a(\"li\",[e._v(\"Eureka Server的响应缓存\\n\"),a(\"ul\",[a(\"li\",[e._v(\"Eureka Client维护每30S更新一次响应缓存\")])])]),e._v(\" \"),a(\"li\",[e._v(\"Eureka Client的缓存\\n\"),a(\"ul\",[a(\"li\",[e._v(\"Eureka Client保留注册信息表的缓存，每30S更新一次\")])])]),e._v(\" \"),a(\"li\",[e._v(\"LoadBalancer的缓存\\n\"),a(\"ul\",[a(\"li\",[e._v(\"Ribbon的负载均衡器从本地的Eureka Client获取服务注册列表信息，Ribbon本身还维护了缓存，每30S更新一次\")])])])]),e._v(\" \"),a(\"h3\",{attrs:{id:\"eureka配置文件常用属性\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#eureka配置文件常用属性\"}},[e._v(\"#\")]),e._v(\" Eureka配置文件常用属性\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Eureka Server配置文件\")]),a(\"br\"),e._v(\" \"),a(\"img\",{attrs:{src:t(505),alt:\"\"}}),a(\"br\"),e._v(\" \"),a(\"img\",{attrs:{src:t(506),alt:\"\"}}),e._v(\" \"),a(\"img\",{attrs:{src:t(507),alt:\"\"}})]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Eureka Client配置文件\")]),a(\"br\"),e._v(\" \"),a(\"img\",{attrs:{src:t(508),alt:\"\"}}),e._v(\" \"),a(\"img\",{attrs:{src:t(509),alt:\"\"}})])])}),[],!1,null,null,null);r.default=i.exports}}]);","extractedComments":[]}